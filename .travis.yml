services:
- docker

env:
  global:
  - secure: "rm7E/aOA1VzWE9+rpAVMeZijz7MSV7v1cjeXrTJnI1uGFDnd6cm3V6OoRt+kwKL+9cb1H99eJhDV7OWnlJt6gaZXfqyjvYayV81oHCNTQxhFhMr21eG+aSrVk/huDnVcOXBVVMrgZGGpWzmzHxLSV2ye6SjHuVDU5vlcRH5qOrhWLQuTovuG4ekAsjDwjec4DmZTQEJhHWmJ8aHqMkLhK3k+wkYNqxgfZ60ajkEO+SEt1QgQScV+j9h2PYbJdT3BeaSscB3chkV8+dVVGpqK6q135E/Lp60CNcxInS/O4r0V9gCvzpkAmv5/V38pdZ0dmsCPAScRCw29B0X61NCXU5l7YMeW2YByQwducJLGCNrzC0eljSgGfBEo+gzHDDZE3sadMiUvXGovaI/+IdUreg2T9oBerR//Wu96w2PRADSh9zfw5s7kMbsjketFUB3Ollvs60DTk8NEptda/FYs4MYI98NkT37QUJElV/y7RmTNx7JPM6fysk2AeHibZ/U/0YXgwQ0vCDyU7ikF7agbAtOhAeQqzI4izI3d/xHFvrQ8HuBJWSaPT4/XMhJwhhHXm1KKL0aCtQf9tbed4OhpzClJOPVw96JHbv+5m3C6gVK9iql8AllayPFj6QcO6geiNNI6ClNAqPZ0NvHIQJMjWU9qtKDp25fqz3kCSLKAck8="
  - secure: "rZUp3mBJcsEBonkRL9KRYP42yvv6HDEuEUKY+oOZKoyD3QWFTsPa6XUznMMWV9KqzuYIQe++DpRir8783xcVH4x2myDVAHDzjUYw75kJnM9mIsMEdmOnRzdcyBVqZ8Qo/kIpzSZ2K8M4HyViDkFRPQa+WWT+lRlklLtRwaWqFc/cM2wqlT/Iic0gX/eOI0juQe8AOA6qA5jklwU+bhnCxvFcdeFhiArkIK9P4JA3RZjWdSP2W55XVyiUGgzZkA2lFZvMdiLq2W0V5LIbHgFRiDXO45TaJU0/fDNy/XHF2p9xngrDm1MrFlTl+hxCVeo11F4vTvDULjMw4ToIQv0Zgl2wm6uYWi876jip59Pb142IYBaMndp38t9V3OqhDl6WoYrLfT5sJOdF1wUtyoSbypITCPbu7PJybw2+FM41nMQQ7Ap6jmt4o+QMEGZJgtl3e7d4ofg+Fjx6ejG5o0/06fV7b5zdTsEwqKc+E1ZiLG6GyIQ5bGfacm9df96u1Fwif0m+0r3xTMRpCdN4nyBGUzr1PXs4cvTgNYj8SrT4HHr8+bAdD1mMqCTP5+0clVJgpzQA3BhJZYW/lEHpmAY0+sAtNqlKiirqTR5rLSYa/WRZYkoQLfTRBkzpuUpenFPE8MDx/1901PBPXPY6cvD8Z5Q9LTWJWAj59DvrJRpMIy4="
  - secure: "taTOSpOTjEbn1LS3mEU/2BmX8Lo5HpF8qxb8uY8yPWHOp1hddRkTt1gHc79ivVO83cAcp9W4aWtuy6gQGKszs/Lecpqaj2mqE3NwvXDI+4uAr7hnU1oPzLRW7ycMy/ltxt0/blrhrizrTqmxCFT9aQG2Rw5wDsXf/DYnSW2CPqtNizGUzjSgImbXovsY73rionWRLNGPv4JcPd/l14cGd7VcEg185/wSJgkjQVZeOcFUdKo2tx/aRfEAe3aWj7u/E0AA3aQV9a/oYPOJ2Myebnsfd4XBB3/1QWHcjowyk+k+oOLQ+f8j1J1pDmfoRq1DZQYOb0SLezfwpFp4+QE5HiDT4eLqYgrbACqteMwg/hFw4TS3cpGSgs8EgBojkXr6Dcdnccewmsrg54jiHqOLPB1O+zqHrdm9VRwWKrY5ibA6sFPzsrfhez1mGUzYkMfOgo2oB44+Rhg/EANa8FmpKKps4/79xswB3zvYT8ah5sjtwXfhhDDe8m0fKhXN/c17n2entEBNaPo46aaZwRcwkqXalf0QNHe8oPwq+/C3QrIYnX0C6yh5TX1cY74BAiRKecsxRPNg6hFUc7CT21Ty5zkwk2k2joGCNpGvPwRLHMBeTDlMngFePLbtBbbwqWj2gGC80a/tTgnd1KZqhm3dMfZt8GBq0bIEs6gj3Xogvyc="

script:
- docker build --tag todo-app:test --target test .
- docker run --env-file .env.test todo-app:test todo_app/tests
- docker run --env BOARDID --env KEY --env TOKEN todo-app:test todo_app/tests_e2e