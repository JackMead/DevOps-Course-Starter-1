services:
- docker

env:
  global:
  - secure: "RRjid+trvMbqW9tycV4IBqX1UeJyGiDxPqQdSZYL7ctDIJf1oKWO9XNPqbd5J0KXrsdu+dhTPh53JE3G1WQpXvyw+GgCpg8tgeu37aVB+PR6vdH4nNS8Cnu6F2UsEIXBBhyvA6KNyZ43pucNTwaFZYjya0PMr5Tg7nHIJo7Tx9erD3rF/J0Qoc1Dn1Bu1LYhTT5o7bbmlB/yz4IjVVH85U7XyZvVzPSXIXUDpjsV7BeTz5hu4jnPaVxHFZQOKFyIleQCaVpDs1iINwkCq3BiQ68IYVMVu/2dcwocIsoQpkBB1EgA39vlMYUAVh6GFzLJdX1qwOw2du+6B/TEELMg7A6hjw3oQ1aQDut7/Zb3p9r4aXfDkkktUr7PT8mLgpNR3OdQu2uEwiJxNAs1+fEzDhwnEsDdt3hP7FWEdGeVEqvy8tRHmXalKRbNuCvu+Rum/WHsPnkG9FctyTGHF3ZfmB6IIhodpTFUN6UQXzE/snfFz0A95e9jPG6k76WgyQ/8Zm14nDpL7b4VYU1sw2qS6Kp2NrAZpSQwi6FUi2cEWZgkDfb8VDNdA2thb5aZp2iYVFM/XLIiFbr6AhVgyB6qNZVpcbbNE/SAXfsouYgcA/SmN0kdOs0dQx9l5hdPDBn2yhkx2qv45Y3ObWXGOsy9cjPArn71FVl+VzWoNtTLTgY="
  - secure: "oREppVBKSZz2lU3kDKPZlMJui3GJJD9aN74vtdqRwH9LA9ybRTwgEskG3M1dNwTXbA097q3wOpPOngEkSgcgXGvgvoNzDhrC4C1vCTbGzCaFxsNgcK+XUkyBx5svioMeUcd9PZmb/1gBZja72lpqSMzWwTS2rWnG++nvWiFnkhUG19+MCI18Esz/p/+ZU13jMHSRY7Tn1M5j1GxBZqg+AXTqaaPThL6H+FXsUiUoGN35sbbarGSDqSf8HcVAlrshjfBPI92r7zAHL/GlbUT+95nNKf/wD/C5NKzRA33RJO63fmStp6CsUuJYkM5AwGYLrMvZeccMITwhI7meJcj0Iqm4nn9PuQhLIMZ85d5lfGuI7dhkkGzXkZKv2+za2NsgO2FMhDrK9aYeUjlBEz3Q6F3IpRJt2d3iDihHd0vSUYs4LZ8i80Fy+3k68f5wqCNqTaIMLlQ0TicBDCKlyBhwM4zP1dyBZGyiW5e/e+xKZz9KF6lcqoiz66ZCvmNAwRIH2Wytip/tQWKFFRW4BJTzWFQ5O6MSabiEyB8kdysWH7qU6sZd63RURu9a/Hsgi2ZF1UjqiwYBgN0xEZmgFpHy/1BSaD+KkjqYu/IAIB5WqPwNvaCKMsi/LV1E5NtjkVEgLpeJA0jHQ8sJHZoqsihk7T3/VxyGW87P/p3XzSNMCTs="
  - secure: "OmwGpHVhSpdXlb+C5B9LoP1V2vsUDP4oV9JONj8ewPgcD/GLM4VZAEUi8daMzlwfCZVnHERCIFHbenEzBjxQLDHbHnLVkX/czzosMjA9Ooyz9EwxXy1V2pkerSZm/vsWiyqwz3V3Mpz+fSri9FlchMPduaHe1abbsxnK2OTIJLDpSBbL61tH3gUgfyAK+jniVzM1/wDuydo6r5U6TZ21sw9h/Gdbeb7N+KJ1KzpokbeKewVqnDTxjU4D2s4UFdqOA11cWbdjDEn66k2FjdlVZe+5tQJ2yTYlJzJBjbsQWlCO0GtdbX3VVSOJuufp8CNpRklWZhB7SkQhe7JMO9fgJvalWyek9bI/AlhG73rQaFlnv39D2WbnADnRFavAY9TUynuWcuUaNK4I4g2kZ3bWgrtBeq1dx0jm41bVTteadx7mzi3LX9rgnkdSD5XXBFr08tF6oEq2waGaenJ0VkmIN6Laibcbx6JSI+JYU9w5VdTR+nFqD9dM4FYhaQg1TbbtL0NraW13vNxwq7F7ScKEoi7qTwi1JZqyX8AiXw5wNmeoetnej7x//z5Y+3NONDISJtElWAsWMI38gxDWvlaqgZtyC8GyATQ2s9qD4tGtKGl80xyQMazP3sw4g2ekAAyJ9RNXrnfaasyI6rHD5kN43sqXzgAfpFtpLsstqcBocqY="

script:
- docker build --tag todo-app:test --target test .
- docker run --env-file .env.test todo-app:test todo_app/tests
- docker run --env BOARDID --env KEY --env TOKEN todo-app:test todo_app/tests_e2e